<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Gale Transforms</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<div>
		<h2>Face Test</h2>
		<p id="p1">Select the vertices for which you would like to carry out the Face Test</p>
		<input type="checkbox" id="chbx1" name="chbx"> vertex 1 </input>
		<input type="checkbox" id="chbx2" name="chbx"> vertex 2 </input>
		<input type="checkbox" id="chbx3" name="chbx"> vertex 3 </input>
		<input type="checkbox" id="chbx4" name="chbx"> vertex 4 </input>
		<input type="checkbox" id="chbx5" name="chbx"> vertex 5 </input>
		<input type="checkbox" id="chbx6" name="chbx"> vertex 6 </input>
		<button onclick="checkForFace()">Is a Face?</button> </div>
		<p id="isAFace"></p>
		<div>
		<h2> Affine Gale Diagram</h2>
		<p id="p2">Click on the button to update Gale and Affine Gale Transformations</p>
		<button onclick="updateGaleAndAffine()">Compute Gale and Affine Gale</button>
		<p id="p3"></p>
		</div>

		<script src="js/math.min.js"></script>
		<script src="js/lalolib.js"></script>
		<script src="js/three.js"></script>
		<script src="js/Detector.js"></script>
		<script src="js/PointDragControls.js"></script>
		<script src="js/Vector3.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="AffineGaleDiagram/AffineGale.js"></script>
		<script src="FindFaces/findFaces.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="ComputeGaleDiagram/ComputeGaleDiagram.js"></script>
		<script src="PointPlacement/pointPlacement.js"></script>

		<div>
			<div>
				<script>
					pointPlacement()
				</script>
			</div>
			<div>
				<script>
					function computeAffine() {
						affGaleInit();
						console.log(gale_array[0]);
						affineGale = affineGalePoints(gale_array[0]);
						console.log(affineGale);
						dispAffGale(affineGale);
					}
				</script>
			</div>
			<div>
				<script type="text/javascript">
				var scaling_factor = 30;
				var gale_array = computeAndDisplayGaleDiagram(getPos(), scaling_factor);
				computeAffine();
				document.getElementById("p3").innerHTML = "<b>Gale Vertices:</b> " + gale_array[1];
				function updateGaleAndAffine(){
					gale_array = updateGaleDiagram(getPos(), scaling_factor)
					document.getElementById("p3").innerHTML = "Gale Vertices: " + gale_array[1];
					computeAffine(); //TODO change this to updateAffine()
				}
				function checkForFace() {
						var inputElements = document.getElementsByName('chbx');
						//console.log(inputElements);
						var verts_indices = [];
						for(var i=0; inputElements[i]; ++i){
							//console.log(inputElements[i].checked);
							if(inputElements[i].checked){
								verts_indices.push(i);
							}
						}
						console.log(verts_indices);
						isAFace = isFace(gale_array[0], verts_indices);
						if (isAFace == true) {
							var result_str = "<b>";
							if (verts_indices.length == 1)
								result_str += "Vertex ";
							else
								result_str += "Vertices ";

							for (var i = 0; i < verts_indices.length-1; i++) {
								result_str += verts_indices[i]+1;
								result_str += ", ";
							}
							result_str += verts_indices[i]+1;
							if (verts_indices.length == 1)
								result_str += " constitutes";
							else
								result_str += " constitute";
							result_str += " a face in the given diagram.</b>";
							//document.getElementById("isAFace").innerHTML = isAFace.toString()
							document.getElementById("isAFace").innerHTML = result_str;
							console.log(result_str);
						}
						else if (isAFace == false) {
							var result_str = "<b>";
							if (verts_indices.length == 1)
								result_str += "Vertex ";
							else
								result_str += "Vertices ";
							for (var i = 0; i < verts_indices.length-1; i++) {
								result_str += verts_indices[i]+1;
								result_str += ", ";
							}
							result_str += verts_indices[i]+1;
							if (verts_indices.length == 1)
								result_str += " does not";
							else
								result_str += " do not";
							result_str += " constitute a face in the given diagram.</b>"
							//document.getElementById("isAFace").innerHTML = isAFace.toString()
							document.getElementById("isAFace").innerHTML = result_str;
							console.log(result_str);
						}
						console.log(isAFace);
					}
				</script>
			</div>
		</div>
	</body>
</html>
